<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <title>QuickBuy</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link rel="stylesheet" href="assets/css/main.css?v=3.4">
</head>

<body>
    <header class="header-area header-style-1 header-height-2">
        <div class="header-top header-top-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info">
                            <ul>
                                <li><i class="fi-rs-smartphone"></i> <a href="#">(+852)1234-5678</a></li>
                                <li><i class="fi-rs-marker"></i><a href="page-contact.html">Our location</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-4">
                        <div class="text-center">
                            <div id="news-flash" class="d-inline-block">
                                <ul>
                                    <li>Exclusive International Brands - Up to 60% Off </li>
                                    <li>Seize the Trends - Global Fashion at Your Fingertips</li>
                                    <li>Authentic Beauty Must-Haves - Shop Overseas Products </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info header-info-right">
                            <ul>
                                <li>
                                    <a class="language-dropdown-active" href="#"> <i class="fi-rs-world"></i> English <i
                                            class="fi-rs-angle-small-down"></i></a>
                                    <ul class="language-dropdown">
                                        <li><a href="#"><img src="assets/imgs/theme/flag-fr.png" alt="">Français</a>
                                        </li>
                                        <li><a href="#"><img src="assets/imgs/theme/flag-dt.png" alt="">Deutsch</a></li>
                                        <li><a href="#"><img src="assets/imgs/theme/flag-ru.png" alt="">Pусский</a></li>
                                    </ul>
                                </li>
                                <li id="loginLink"><i class="fi-rs-user"></i><a href="page-login-register.html">Log In /
                                        Sign Up</a></li>
                                <li id="logoutLink" style="display: none;"><i class="fi-rs-user"></i><a
                                        href="php/logout.php">Log Out</a></li>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-middle header-middle-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="header-wrap">
                    <div class="logo logo-width-1">
                        <a href="index.html"><img src="assets/imgs/theme/logo.svg" alt="logo"></a>
                    </div>
                    <div class="header-right">
                        <div class="search-style-2">
                            <form action="#">
                                <input type="text" placeholder="Search for items...">
                            </form>
                        </div>
                        <div class="header-action-right">
                            <div class="header-action-2">
                                <div class="header-action-icon-2">
                                    <a class="mini-cart-icon" href="shop-cart.html">
                                        <img alt="Evara" src="assets/imgs/theme/icons/icon-cart.svg">
                                        <span class="pro-count blue"></span>
                                    </a>
                                    <div class="cart-dropdown-wrap cart-dropdown-hm2">
                                        <ul>
                                            <li>

                                                <div class="shopping-cart-title">

                                                    <h4>empty</h4>
                                                </div>

                                            </li>

                                        </ul>
                                        <div class="shopping-cart-footer">
                                            <div class="shopping-cart-total">
                                                <h4>Total <span>0</span></h4>
                                            </div>
                                            <div class="shopping-cart-button">
                                                <a href="shop-cart.html" class="outline">View cart</a>
                                                <a href="shop-checkout.html">Checkout</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom header-bottom-bg-color sticky-bar">
            <div class="container">
                <div class="header-wrap header-space-between position-relative">
                    <div class="logo logo-width-1 d-block d-lg-none">
                        <a href="index.html"><img src="assets/imgs/theme/logo.svg" alt="logo"></a>
                    </div>
                    <div class="header-nav d-none d-lg-flex">
                        <div class="main-categori-wrap d-none d-lg-block">
                            <a class="categori-button-active" href="#">
                                <span class="fi-rs-apps"></span> Browse Categories
                            </a>
                        </div>
                        <div class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block">
                            <nav>
                                <ul>
                                    <li><a class="active" href="index.html">Home </a>
                                    </li>
                                    <li>
                                        <a href="page-about.html">About</a>
                                    </li>
                                    <li><a href="shop-grid-right.html">Shop</a>
                                    </li>
                                    <li class="position-static"><a href="#">Mega menu</a>
                                    </li>
                                    <li><a href="blog-category-grid.html">Blog</a>
                                    </li>
                                    <li>
                                        <a href="page-contact.html">Contact</a>
                                    </li>
                                    <li><a href="#"></a>
                                    </li>
                                    <li><a href="#"></a>
                                    </li>
                                    <li><a href="#"></a>
                                    </li>
                                    <li><a href="#"></a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="hotline d-none d-lg-block">
                        <p><i class="fi-rs-headset"></i><span>Hotline</span> 1234-5678 </p>
                    </div>
                    </p>
                    <div class="header-action-right d-block d-lg-none">
                        <div class="header-action-2">
                            <div class="header-action-icon-2">
                            </div>
                            <div class="header-action-icon-2">
                                <a class="mini-cart-icon" href="shop-cart.html">
                                    <img alt="Evara" src="assets/imgs/theme/icons/icon-cart.svg">
                                    <span class="pro-count white"></span>
                                </a>
                                <div class="cart-dropdown-wrap cart-dropdown-hm2">
                                    <ul>


                                    </ul>
                                    <div class="shopping-cart-footer">
                                        <div class="shopping-cart-total">
                                            <h4>Total <span>$</span></h4>
                                        </div>
                                        <div class="shopping-cart-button">
                                            <a href="shop-cart.html">View cart</a>
                                            <a href="shop-checkout.html">Checkout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="header-action-icon-2 d-block d-lg-none">
                                <div class="burger-icon burger-icon-white">
                                    <span class="burger-icon-top"></span>
                                    <span class="burger-icon-mid"></span>
                                    <span class="burger-icon-bottom"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Fashion
                    <span></span> Abstract Print Patchwork Dress
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product-detail accordion-detail">
                            <div class="row mb-50">
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-gallery">
                                        <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                        <!-- MAIN SLIDES -->
                                        <div class="product-image-slider">
                                            <figure class="border-radius-10">
                                                <img src="assets/imgs/product/2.jpg" alt="product image">
                                            </figure>
                                            <figure class="border-radius-10">
                                                <img src="assets/imgs/product/2.jpg" alt="product image">
                                            </figure>

                                        </div>
                                        <!-- THUMBNAILS -->
                                        <div class="slider-nav-thumbnails pl-15 pr-15">
                                            <div><img src="assets/imgs/product/2.jpg" alt="product image"></div>
                                            <div><img src="assets/imgs/product/2.jpg" alt="product image"></div>

                                        </div>
                                    </div>
                                    <!-- End Gallery -->
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-info" id="product-detail">
                                    </div>
                                    <button type="button" id="add-to-cart-btn">Add to cart</button>
                                    <!-- Detail Info -->
                                </div>
                            </div>
                            <div class="row">

                                <h3 class="section-title style-1 mb-30 mt-30">Reviews</h3>
                                <!--Comments-->
                                <div class="comments-area style-2">
                                    <div class="row">
                                        <div class="col-lg-8">
                                            <h4 class="mb-30">Customer questions & answers</h4>
                                            <div class="comment-list">
                                                <div class="single-comment justify-content-between d-flex">

                                                </div>
                                                <!--single-comment -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--comment form-->
                                <div class="comment-form">
                                    <h4 class="mb-15">Add a review</h4>
                                    <div class="row">
                                        <div class="col-lg-8 col-md-12">
                                            <form class="form-contact comment_form" action="php/submit_review.php"
                                                method="post" id="commentForm">
                                                <input type="hidden" name="product_id" value="2">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <textarea class="form-control w-100" name="comment"
                                                                id="comment" cols="30" rows="9"
                                                                placeholder="Write Comment"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <input class="form-control" name="name" id="name"
                                                                type="text" placeholder="Name">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <input class="form-control" name="email" id="email"
                                                                type="email" placeholder="Email">
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <input class="form-control" name="website" id="website"
                                                                type="text" placeholder="Website">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <button type="submit" class="button button-contactForm">Submit
                                                        Review</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="banner-img banner-big wow fadeIn f-none animated mt-50">
                            <img class="border-radius-10" src="assets/imgs/banner/banner.png" alt="">
                            <div class="banner-text">
                                <h4 class="mb-15 mt-40">Global Finds,</h4>
                                <h2 class="fw-600 mb-20">Local Charm – <br>Your Gateway to Worldwide Treasures</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>
    </main>
    <footer class="main">
        <section class="newsletter p-30 text-white wow fadeIn animated">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-md-3 mb-lg-0">
                        <div class="row align-items-center">
                            <div class="col flex-horizontal-center">

                            </div>
                            <div class="col my-4 my-md-0 des">

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                    </div>
                </div>
            </div>
        </section>
        <section class="section-padding footer-mid">
            <div class="container pt-15 pb-20">
                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="widget-about font-md mb-md-5 mb-lg-0">
                            <div class="logo logo-width-1 wow fadeIn animated">
                                <a href="index.html"><img src="assets/imgs/theme/logo.svg" alt="logo"></a>
                            </div>
                            <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                            <p class="wow fadeIn animated">
                                <strong>Address: </strong>21 Yuen Wo Road, Sha Tin Wai, Sha Tin District, Hong Kong
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Phone: </strong>(+852) 1234-5678
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3">
                        <h5 class="widget-title wow fadeIn animated">About</h5>
                        <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                            <li><a href="page-about.html">About Us</a></li>
                            <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                            <li><a href="page-contact.html">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2  col-md-3">
                        <h5 class="widget-title wow fadeIn animated">My Account</h5>
                        <ul class="footer-list wow fadeIn animated">
                            <li><a href="page-login-register.html">Sign In</a></li>
                            <li><a href="shop-cart.html">View Cart</a></li>
                            <li><a href="shop-checkout.html">Check Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <div class="container pb-20 wow fadeIn animated">
            <div class="row">
                <div class="col-12 mb-20">
                    <div class="footer-bottom"></div>
                </div>
                <div class="col-lg-6">
                    <p class="float-md-left font-sm text-muted mb-0">&copy; 2024, <strong
                            class="text-brand">QuickBuy</strong> - Your Fast-Track to Quality Shopping
                    </p>
                </div>
                <div class="col-lg-6">
                    <p class="text-lg-end text-start font-sm text-muted mb-0">
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Vendor JS-->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="assets/js/plugins/slick.js"></script>
    <script src="assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="assets/js/plugins/wow.js"></script>
    <script src="assets/js/plugins/jquery-ui.js"></script>
    <script src="assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="assets/js/plugins/magnific-popup.js"></script>
    <script src="assets/js/plugins/select2.min.js"></script>
    <script src="assets/js/plugins/waypoints.js"></script>
    <script src="assets/js/plugins/counterup.js"></script>
    <script src="assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="assets/js/plugins/images-loaded.js"></script>
    <script src="assets/js/plugins/isotope.js"></script>
    <script src="assets/js/plugins/scrollup.js"></script>
    <script src="assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="assets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template  JS -->
    <script src="./assets/js/main.js?v=3.4"></script>
    <script src="./assets/js/shop.js?v=3.4"></script>
    <!-- HTML文件 -->
    <div class="detail-info" id="product-detail">
        <!-- 动态内容将被插入这里 -->
    </div>
    <script src="./assets/js/style.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 页面加载完成后需要运行的函数
            fetchProductDetails(2);
            fetchReviews(2);
        });

        document.getElementById('add-to-cart-btn').addEventListener('click', function () {
            // 假设product_id和quantity是您要添加到购物车的产品信息
            var product_id = 2; // 示例产品ID
            var quantity = 1; // 示例数量

            // 创建一个FormData对象
            var formData = new FormData();
            formData.append('product_id', product_id);
            formData.append('quantity', quantity);

            // 发起Ajax POST请求
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'php/add-to-cart.php', true);
            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    // 请求成功，重定向到购物车页面
                    window.location.href = 'shop-cart.html';
                }
            };
            xhr.send(formData);
        });

        // 使用获取的数据更新HTML内容
        function updateProductDetails(product) {
            var detailDiv = document.getElementById('product-detail');
            detailDiv.innerHTML = `
                <h2 class="title-detail">${product.name}</h2>
                    <div class="product-price primary-color float-left">
                        <ins><span class="text-brand">$${product.price}</span></ins>
                    </div>
                    <div class="short-desc mb-30">
                        <p>${product.description}</p>
                    </div>
                    <!-- 其他产品详情 -->
                `;
        }

        function fetchReviews(productId) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', `php/fetch_reviews.php?product_id=${productId}`, true);
            xhr.onload = function () {
                if (this.status === 200) {
                    var reviews = JSON.parse(this.responseText);
                    var reviewsContainer = document.querySelector('.comment-list');
                    reviewsContainer.innerHTML = ''; // 清空现有评论

                    var maxReviewsToShow = 5;
                    var isExpanded = false; // Track the state of the review list

                    // Function to toggle review display
                    function toggleReviews() {
                        reviewsContainer.innerHTML = ''; // Clear the reviews
                        var reviewsToShow = isExpanded ? reviews : reviews.slice(0, maxReviewsToShow);
                        reviewsToShow.forEach(function (review) {
                            var reviewElement = document.createElement('div');
                            reviewElement.className = 'single-comment justify-content-between d-flex';
                            reviewElement.innerHTML = `
                                <div class="user justify-content-between d-flex">
                                    <div class="thumb text-center">
                                        <img src="assets/imgs/page/avatar-${(Math.floor(Math.random() * 8) + 1)}.jpg" alt="">
                                        <h6><a href="#">${review.name}</a></h6>
                                        <p class="font-xxs">Reviewed on ${new Date(review.created_at).toLocaleDateString()}</p>
                                    </div>
                                    <div class="desc">
                                        <p>${review.comment}</p>
                                        <div class="d-flex justify-content-between">
                                            <p class="font-xs mr-30">${new Date(review.created_at).toLocaleString()}</p>
                                        </div>
                                    </div>
                                </div>
                            `;
                            reviewsContainer.appendChild(reviewElement);
                        });
                        if (reviews.length > maxReviewsToShow) {
                            // Add the toggle button at the end
                            var toggleButton = document.createElement('button');
                            toggleButton.textContent = isExpanded ? 'Show Less' : 'Show More';
                            toggleButton.onclick = function () {
                                isExpanded = !isExpanded;
                                toggleReviews();
                            };
                            reviewsContainer.appendChild(toggleButton);
                        }
                    }

                    toggleReviews();
                } else {
                    console.error('Failed to load reviews:', this.status);
                }
            };
            xhr.onerror = function () {
                console.error('Request failed due to network error.');
            };
            xhr.send();
        }

        function fetchProductDetails(productId) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', `php/get-product-details.php?product_id=${productId}`, true);
            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    try {
                        var product = JSON.parse(xhr.responseText);
                        updateBreadcrumb(product.name);
                        updateProductDetails(product);
                    } catch (e) {
                        console.error('Failed to parse JSON:', e);
                    }
                }
            };
            xhr.onerror = function () {
                console.error('Request failed.');
            };
            xhr.send();
        }

        function updateBreadcrumb(productName) {
            var breadcrumbDiv = document.querySelector('.breadcrumb');
            breadcrumbDiv.innerHTML = `<a href="index.html" rel="nofollow">Home</a> <span></span> ${productName}`;
        }
    </script>
</body>


</html>